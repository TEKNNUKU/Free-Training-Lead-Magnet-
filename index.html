<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<title>Build a Business That Sells for You</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {font-family:sans-serif;background:#101010;color:white;padding:20px}
.container {max-width:700px;margin:auto}
input {width:100%;padding:12px;margin-top:10px}
button {width:100%;padding:12px;margin-top:10px;background:gold;border:none;font-size:18px;font-weight:bold}
#video {display:none;margin-top:20px}
.success {color:#00ffae;margin-top:10px}
</style>
</head>

<body>

<div class="container">

<h1>Build a Business That Sells for You</h1>
<p>
Stop chasing customers.  
Learn how to build digital assets, platforms, and systems that generate income automatically.
</p>

<h3>Enter your email to unlock the training:</h3>

<form id="emailForm">
<input type="email" id="email" placeholder="Your email address" required>
<button type="submit">Unlock Training</button>
<p id="message" class="success"></p>
</form>

<div id="video">
<hr>
<iframe width="100%" height="320"
src="https://pink-quiet-wolf-922.mypinata.cloud/ipfs/bafybeia4k6ubvkqwjyakoidtgm72yohkuzk6t464bz54y3yfxp3qzlvawa"
frameborder="0" allowfullscreen></iframe>
</div>

</div>

<!-- ================= FIREBASE ================= -->

<script type="module">

// Import Firebase SDK
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

// ✅ YOUR FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyAUYkQ5wA3ncNqNvCkJFfqLkrLwolx632k",
  authDomain: "gated-video-landing-page.firebaseapp.com",
  projectId: "gated-video-landing-page",
  storageBucket: "gated-video-landing-page.firebasestorage.app",
  messagingSenderId: "942723264796",
  appId: "1:942723264796:web:95f20f94f88af0147d8ad9",
  measurementId: "G-TTW0ZEL2T9"
};

// Init Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// DOM references
const form = document.getElementById("emailForm");
const emailInput = document.getElementById("email");
const videoBox = document.getElementById("video");
const message = document.getElementById("message");

// FORM SUBMIT
form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const email = emailInput.value.trim();

  if (!email) {
    alert("Enter a valid email");
    return;
  }

  try {

    // Save email
    await addDoc(collection(db, "leads"), {
      email: email,
      source: "Build A Business Training",
      createdAt: serverTimestamp()
    });

    // UI SUCCESS
    message.innerText = "✅ Access unlocked. Enjoy the training.";

    // Unlock Video
    videoBox.style.display = "block";

    form.reset();

  } catch (error) {

    alert("Error saving your email. Try again.");
    console.error(error);

  }

});

</script>

</body>
</html>
